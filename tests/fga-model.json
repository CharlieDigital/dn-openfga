{"schema_version":"1.1","type_definitions":[{"type":"user"},{"metadata":{"relations":{"member":{"directly_related_user_types":[{"type":"user"}]},"team":{"directly_related_user_types":[{"type":"team"}]}}},"relations":{"member":{"this":{}},"team":{"this":{}}},"type":"group"},{"metadata":{"relations":{"group":{"directly_related_user_types":[{"type":"group"}]},"member":{"directly_related_user_types":[{"type":"user"}]}}},"relations":{"group":{"this":{}},"member":{"union":{"child":[{"this":{}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"group"}}}]}}},"type":"team"},{"metadata":{"relations":{"approve":{},"approver":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"edit":{},"editor":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"publish":{},"publisher":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"read":{},"reader":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]}}},"relations":{"approve":{"union":{"child":[{"computedUserset":{"relation":"approver"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"approver"}}}]}},"approver":{"this":{}},"edit":{"union":{"child":[{"computedUserset":{"relation":"editor"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}}]}},"editor":{"this":{}},"publish":{"union":{"child":[{"computedUserset":{"relation":"publisher"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"publisher"}}}]}},"publisher":{"this":{}},"read":{"union":{"child":[{"computedUserset":{"relation":"reader"}},{"computedUserset":{"relation":"editor"}},{"computedUserset":{"relation":"approver"}},{"computedUserset":{"relation":"publisher"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"reader"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"approver"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"publisher"}}}]}},"reader":{"this":{}}},"type":"form"},{"metadata":{"relations":{"approve":{},"approver":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"edit":{},"editor":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"publish":{},"publisher":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"read":{},"reader":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]}}},"relations":{"approve":{"union":{"child":[{"computedUserset":{"relation":"approver"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"approver"}}}]}},"approver":{"this":{}},"edit":{"union":{"child":[{"computedUserset":{"relation":"editor"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}}]}},"editor":{"this":{}},"publish":{"union":{"child":[{"computedUserset":{"relation":"publisher"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"publisher"}}}]}},"publisher":{"this":{}},"read":{"union":{"child":[{"computedUserset":{"relation":"reader"}},{"computedUserset":{"relation":"editor"}},{"computedUserset":{"relation":"approver"}},{"computedUserset":{"relation":"publisher"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"reader"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"approver"}}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"publisher"}}}]}},"reader":{"this":{}}},"type":"document"},{"metadata":{"relations":{"blocked":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"edit":{},"editor":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"owner":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"read":{},"reader":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]}}},"relations":{"blocked":{"this":{}},"edit":{"union":{"child":[{"difference":{"base":{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"owner"}}},"subtract":{"union":{"child":[{"computedUserset":{"relation":"blocked"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"blocked"}}}]}}}},{"difference":{"base":{"computedUserset":{"relation":"editor"}},"subtract":{"computedUserset":{"relation":"blocked"}}}},{"difference":{"base":{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}},"subtract":{"union":{"child":[{"computedUserset":{"relation":"blocked"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"blocked"}}}]}}}}]}},"editor":{"this":{}},"owner":{"this":{}},"read":{"union":{"child":[{"difference":{"base":{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"owner"}}},"subtract":{"union":{"child":[{"computedUserset":{"relation":"blocked"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"blocked"}}}]}}}},{"difference":{"base":{"computedUserset":{"relation":"reader"}},"subtract":{"computedUserset":{"relation":"blocked"}}}},{"difference":{"base":{"computedUserset":{"relation":"editor"}},"subtract":{"computedUserset":{"relation":"blocked"}}}},{"difference":{"base":{"computedUserset":{"relation":"owner"}},"subtract":{"computedUserset":{"relation":"blocked"}}}},{"difference":{"base":{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"reader"}}},"subtract":{"union":{"child":[{"computedUserset":{"relation":"blocked"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"blocked"}}}]}}}},{"difference":{"base":{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"editor"}}},"subtract":{"union":{"child":[{"computedUserset":{"relation":"blocked"}},{"tupleToUserset":{"computedUserset":{"relation":"member"},"tupleset":{"relation":"blocked"}}}]}}}}]}},"reader":{"this":{}}},"type":"crm_company"},{"metadata":{"relations":{"edit":{},"editor":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]},"owner":{},"parent":{"directly_related_user_types":[{"type":"crm_company"}]},"read":{},"reader":{"directly_related_user_types":[{"type":"user"},{"type":"group"},{"type":"team"}]}}},"relations":{"edit":{"union":{"child":[{"tupleToUserset":{"computedUserset":{"relation":"edit"},"tupleset":{"relation":"parent"}}},{"computedUserset":{"relation":"owner"}}]}},"editor":{"this":{}},"owner":{"tupleToUserset":{"computedUserset":{"relation":"owner"},"tupleset":{"relation":"parent"}}},"parent":{"this":{}},"read":{"union":{"child":[{"tupleToUserset":{"computedUserset":{"relation":"read"},"tupleset":{"relation":"parent"}}},{"computedUserset":{"relation":"owner"}}]}},"reader":{"this":{}}},"type":"crm_person"},{"metadata":{"relations":{"enterprise":{"directly_related_user_types":[{"type":"user"},{"type":"team"}]},"free_trial":{"directly_related_user_types":[{"type":"user"},{"condition":"active_trial","type":"user"},{"type":"team"},{"condition":"active_trial","type":"team"}]},"paid":{"directly_related_user_types":[{"type":"user"},{"type":"team"}]},"use_agent_workflows":{},"use_ai_chat":{}}},"relations":{"enterprise":{"this":{}},"free_trial":{"this":{}},"paid":{"this":{}},"use_agent_workflows":{"union":{"child":[{"computedUserset":{"relation":"paid"}},{"computedUserset":{"relation":"enterprise"}}]}},"use_ai_chat":{"union":{"child":[{"computedUserset":{"relation":"free_trial"}},{"computedUserset":{"relation":"paid"}},{"computedUserset":{"relation":"enterprise"}}]}}},"type":"subscription"}],"conditions":{"active_trial":{"expression":"current_time \u003c trial_start + trial_duration","name":"active_trial","parameters":{"current_time":{"type_name":"TYPE_NAME_TIMESTAMP"},"trial_duration":{"type_name":"TYPE_NAME_DURATION"},"trial_start":{"type_name":"TYPE_NAME_TIMESTAMP"}}}}}
